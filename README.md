# ü§ñ Telegram ChatBot —Å GigaChat API

> –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π —á–∞—Ç-–±–æ—Ç –¥–ª—è Telegram –Ω–∞ –±–∞–∑–µ –Ω–µ–π—Ä–æ—Å–µ—Ç–∏ GigaChat –æ—Ç –°–±–µ—Ä–±–∞–Ω–∫–∞

**–¢–µ—Å—Ç–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ –¥–ª—è –∫–æ–º–ø–∞–Ω–∏–∏ za | bota**

**üîó –î–µ–º–æ-–±–æ—Ç:** [@mmagistr_llm_bot](https://t.me/mmagistr_llm_bot)

***

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –®–∞–≥ 1: –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤

#### 1.1 Telegram Bot Token

1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram –∏ –Ω–∞–π–¥–∏—Ç–µ [@BotFather](https://t.me/BotFather)
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É `/newbot`
3. –í–≤–µ–¥–∏—Ç–µ –∏–º—è –±–æ—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `My ChatBot`)
4. –í–≤–µ–¥–∏—Ç–µ username –±–æ—Ç–∞ (–¥–æ–ª–∂–µ–Ω –∑–∞–∫–∞–Ω—á–∏–≤–∞—Ç—å—Å—è –Ω–∞ `bot`, –Ω–∞–ø—Ä–∏–º–µ—Ä `my_chatbot`)
5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω (—Ñ–æ—Ä–º–∞—Ç: `123456789:ABCdefGHIjklMNOpqrsTUVwxyz`)

#### 1.2 GigaChat API Credentials

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ [developers.sber.ru/studio](https://developers.sber.ru/studio)
2. –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å —á–µ—Ä–µ–∑ **–°–±–µ—Ä ID** –∏–ª–∏ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞
3. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç **"GigaChat API"**
4. –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –¥–æ—Å—Ç—É–ø–∞: **"–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –¥–æ—Å—Ç—É–ø –¥–ª—è —Ñ–∏–∑–∏—á–µ—Å–∫–∏—Ö –ª–∏—Ü"** (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π)
5. –í —Ä–∞–∑–¥–µ–ª–µ **"–ù–∞—Å—Ç—Ä–æ–π–∫–∏ API"** –Ω–∞–π–¥–∏—Ç–µ **"–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–æ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ"**
6. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ **Authorization Key** (–¥–ª–∏–Ω–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ Base64)

> üí° **–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ª–∏–º–∏—Ç:** 1,000,000 —Ç–æ–∫–µ–Ω–æ–≤/–º–µ—Å—è—Ü (–ø—Ä–∏–º–µ—Ä–Ω–æ 5,000 –¥–∏–∞–ª–æ–≥–æ–≤)

***

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

1. –°–∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
```bash
git clone https://github.com/your-username/gigachat_tg_bot.git
cd gigachat_tg_bot
```

2. –°–æ–∑–¥–∞–π—Ç–µ `.env` —Ñ–∞–π–ª –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–∏–º–µ—Ä–∞:
```bash
cp .env.example .env
```

3. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env` –∏ –¥–æ–±–∞–≤—å—Ç–µ —Å–≤–æ–∏ —Ç–æ–∫–µ–Ω—ã:
```env
# –û–±—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
ENV=production

# TOKENS
BOT_TOKEN=–≤–∞—à_telegram_bot_token
GIGACHAT_CREDENTIALS=–≤–∞—à_gigachat_authorization_key

# AI SETTINGS
TEMPERATURE=0.7
MAX_TOKENS=1024
MAX_HISTORY_LENGTH=10

LOG_LEVEL=INFO

# Production (PostgreSQL)
POSTGRES_USER=bot_user
POSTGRES_PASSWORD=secure_password_change_me
POSTGRES_DB=bot_database
```


***

### –®–∞–≥ 3: –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker

```bash
# –°–æ–±—Ä–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker-compose up -d

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
docker-compose logs -f bot

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
docker-compose down
```

**–ì–æ—Ç–æ–≤–æ!** –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ üéâ

***

## üìã –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

Telegram-–±–æ—Ç —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π –Ω–µ–π—Ä–æ—Å–µ—Ç–∏ **GigaChat** –æ—Ç –°–±–µ—Ä–±–∞–Ω–∫–∞ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –∑–∞–ø—Ä–æ—Å—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–∏–∞–ª–æ–≥–∞.

**üîó –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –±–æ—Ç–∞:** [@mmagistr_llm_bot](https://t.me/mmagistr_llm_bot)

### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ **–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –æ–±—â–µ–Ω–∏–µ** ‚Äî –±–æ—Ç –ø–æ–º–Ω–∏—Ç –∏—Å—Ç–æ—Ä–∏—é –¥–∏–∞–ª–æ–≥–∞
- ‚úÖ **–ö–æ–º–∞–Ω–¥—ã** `/start` –∏ `/help`
- ‚úÖ **–°–±—Ä–æ—Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞** ‚Äî –∫–Ω–æ–ø–∫–∞ "–ù–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å" –∏ –∫–æ–º–∞–Ω–¥–∞ `/start`
- ‚úÖ **PostgreSQL** ‚Äî –Ω–∞–¥–µ–∂–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ **Docker** ‚Äî –ø—Ä–æ—Å—Ç–æ–π –¥–µ–ø–ª–æ–π –≤ –æ–¥–∏–Ω –∫–ª–∏–∫
- ‚úÖ **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å** ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- ‚úÖ **Repository Pattern** ‚Äî —á–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∫–æ–¥–∞

***

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **Python 3.13** ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π —è–∑—ã–∫
- **aiogram 3.13** ‚Äî —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è Telegram –±–æ—Ç–æ–≤
- **GigaChat API** ‚Äî –Ω–µ–π—Ä–æ—Å–µ—Ç—å –æ—Ç –°–±–µ—Ä–±–∞–Ω–∫–∞
- **SQLAlchemy 2.0** ‚Äî ORM –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
- **PostgreSQL 14.2** ‚Äî —Ä–µ–ª—è—Ü–∏–æ–Ω–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **Docker \& Docker Compose** ‚Äî –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è
- **asyncio** ‚Äî –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ


### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
llm_tg_bot/
‚îú‚îÄ‚îÄ docker-compose.yaml          # –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
‚îú‚îÄ‚îÄ .env                         # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ .env.example                 # –ü—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ requirements.txt             # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îÇ
‚îî‚îÄ‚îÄ app/                         # –ö–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
    ‚îú‚îÄ‚îÄ Dockerfile               # –û–±—Ä–∞–∑ –¥–ª—è –±–æ—Ç–∞
    ‚îú‚îÄ‚îÄ main.py                  # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
    ‚îÇ
    ‚îú‚îÄ‚îÄ bot/                     # –õ–æ–≥–∏–∫–∞ –±–æ—Ç–∞
    ‚îÇ   ‚îú‚îÄ‚îÄ handlers/            # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥ –∏ —Å–æ–æ–±—â–µ–Ω–∏–π
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ start.py         # /start –∏ /help
    ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ chat.py          # –û–±—â–µ–Ω–∏–µ —Å GigaChat
    ‚îÇ   ‚îú‚îÄ‚îÄ keyboards/           # –ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã
    ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ reply.py         # –ö–Ω–æ–ø–∫–∞ "–ù–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å"
    ‚îÇ   ‚îú‚îÄ‚îÄ middlewares/         # –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–µ –ü–û
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ db_session.py    # –°–µ—Å—Å–∏–∏ –ë–î
    ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ logging.py       # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
    ‚îÇ   ‚îî‚îÄ‚îÄ services/            # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
    ‚îÇ       ‚îî‚îÄ‚îÄ gigachat_service.py  # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å GigaChat
    ‚îÇ
    ‚îú‚îÄ‚îÄ config/                  # –ù–∞—Å—Ç—Ä–æ–π–∫–∏
    ‚îÇ   ‚îú‚îÄ‚îÄ base.py              # –ë–∞–∑–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
    ‚îÇ   ‚îú‚îÄ‚îÄ dev.py               # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
    ‚îÇ   ‚îú‚îÄ‚îÄ prod.py              # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
    ‚îÇ   ‚îî‚îÄ‚îÄ settings.py          # –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫
    ‚îÇ
    ‚îú‚îÄ‚îÄ database/                # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
    ‚îÇ   ‚îú‚îÄ‚îÄ base.py              # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
    ‚îÇ   ‚îî‚îÄ‚îÄ models.py            # –ú–æ–¥–µ–ª–∏ —Ç–∞–±–ª–∏—Ü
    ‚îÇ
    ‚îú‚îÄ‚îÄ repositories/            # –°–ª–æ–π –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º
    ‚îÇ   ‚îú‚îÄ‚îÄ user_repository.py   # –†–∞–±–æ—Ç–∞ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
    ‚îÇ   ‚îî‚îÄ‚îÄ chat_repository.py   # –†–∞–±–æ—Ç–∞ —Å –∏—Å—Ç–æ—Ä–∏–µ–π —á–∞—Ç–∞
    ‚îÇ
    ‚îî‚îÄ‚îÄ utils/                   # –£—Ç–∏–ª–∏—Ç—ã
        ‚îî‚îÄ‚îÄ logger.py            # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
```


***

## üîß –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí Telegram ‚Üí aiogram ‚Üí chat.py handler
```


### 2. –ü–æ–ª—É—á–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –¥–∏–∞–ª–æ–≥–∞

```python
# –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 10 –ø–∞—Ä —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ –ë–î
history = await chat_repo.get_history(user_id, limit=10)
```


### 3. –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –≤ GigaChat

```python
# –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å –∫ GigaChat API
response = await gigachat_service.generate_response(
    message=user_message,
    history=history
)
```

**–í–Ω—É—Ç—Ä–∏ GigaChat Service:**

- –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏
- –û—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ `gigachat` –±–∏–±–ª–∏–æ—Ç–µ–∫—É
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `run_in_executor` –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç–∏


### 4. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î

```python
# –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ –∏ –æ—Ç–≤–µ—Ç–∞ (user_id, is_from_user, message)
await chat_repo.save_message(user_id, True, user_message)
await chat_repo.save_message(user_id, False, response)
```


### 5. –û—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç–≤–µ—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

```
GigaChat ‚Üí gigachat_service ‚Üí common.py ‚Üí aiogram ‚Üí Telegram ‚Üí –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
```


***

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü—ã

#### `users`

```sql
id              BIGINT PRIMARY KEY
telegram_id     BIGINT UNIQUE NOT NULL
username        VARCHAR(255)
created_at      TIMESTAMP DEFAULT NOW()
updated_at      TIMESTAMP DEFAULT NOW()
```


#### `chat_messages`

```sql
id              SERIAL PRIMARY KEY
user_id         BIGINT REFERENCES users(telegram_id)
is_from_user    BOOLEAN
message_text    TEXT NOT NULL
created_at      TIMESTAMP DEFAULT NOW()
updated_at      TIMESTAMP DEFAULT NOW()
```


***

## ‚öôÔ∏è –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞ |
| :-- | :-- | :-- |
| `ENV` | –û–∫—Ä—É–∂–µ–Ω–∏–µ (`development`/`production`) | ‚úÖ |
| `BOT_TOKEN` | –¢–æ–∫–µ–Ω Telegram –±–æ—Ç–∞ | ‚úÖ |
| `GIGACHAT_CREDENTIALS` | –ö–ª—é—á –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ GigaChat | ‚úÖ |
| `TEMPERATURE` | –ö—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–æ–≤ (0.0-1.0) | ‚ùå (default: 0.7) |
| `MAX_TOKENS` | –ú–∞–∫—Å. –¥–ª–∏–Ω–∞ –æ—Ç–≤–µ—Ç–∞ | ‚ùå (default: 1024) |
| `MAX_HISTORY_LENGTH` | –ö–æ–ª-–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ | ‚ùå (default: 10) |
| `LOG_LEVEL` | –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è | ‚ùå (default: INFO) |
| `POSTGRES_USER` | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å PostgreSQL | ‚úÖ |
| `POSTGRES_PASSWORD` | –ü–∞—Ä–æ–ª—å PostgreSQL | ‚úÖ |
| `POSTGRES_DB` | –ò–º—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö | ‚úÖ |


***

## üõ†Ô∏è –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ (–±–µ–∑ Docker)

1. –°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:
```bash
python3 -m venv venv
source venv/bin/activate  # Linux/Mac
# –∏–ª–∏
venv\Scripts\activate  # Windows
```

2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
pip install -r requirements.txt
```

3. –°–æ–∑–¥–∞–π—Ç–µ `.env.dev`:
```env
ENV=development
BOT_TOKEN=your_token
GIGACHAT_CREDENTIALS=your_credentials
LOG_LEVEL=DEBUG
```

4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞:
```bash
cd app
python -m main
```


### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ë–î

```bash
# –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –ë–î (–£–î–ê–õ–ò–¢ –í–°–ï –î–ê–ù–ù–´–ï!)
docker-compose down -v
docker-compose up -d
```


***

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```bash
# –õ–æ–≥–∏ –±–æ—Ç–∞
docker-compose logs -f bot

# –õ–æ–≥–∏ PostgreSQL
docker-compose logs -f bot_db
```


### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î

```bash
docker exec -it bot_db psql -U bot_user -d bot_database
```


### –í—Ö–æ–¥ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä

```bash
docker exec -it bot bash
```


***

## üìù –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

**üîó –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –±–æ—Ç–∞:** [@mmagistr_llm_bot](https://t.me/mmagistr_llm_bot)

### –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

- `/start` ‚Äî –Ω–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –±–æ—Ç–æ–º –∏ —Å–±—Ä–æ—Å–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç
- `/help` ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É


### –ö–Ω–æ–ø–∫–∏

- **"–ù–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å"** ‚Äî —Å–±—Ä–æ—Å –∏—Å—Ç–æ—Ä–∏–∏ –¥–∏–∞–ª–æ–≥–∞ –¥–ª—è –Ω–∞—á–∞–ª–∞ –Ω–æ–≤–æ–π –±–µ—Å–µ–¥—ã


### –ü—Ä–∏–º–µ—Ä –¥–∏–∞–ª–æ–≥–∞

```
üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: –ü—Ä–∏–≤–µ—Ç! –ú–µ–Ω—è –∑–æ–≤—É—Ç –ò–≤–∞–Ω.
ü§ñ –ë–æ—Ç: –ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ, –ò–≤–∞–Ω! –†–∞–¥ –ø–æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è. –ß–µ–º –º–æ–≥—É –ø–æ–º–æ—á—å?

üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: –†–∞—Å—Å–∫–∞–∂–∏ –ø—Ä–æ Python.
ü§ñ –ë–æ—Ç: Python ‚Äî —ç—Ç–æ –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è...

üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: –ö–∞–∫ –º–µ–Ω—è –∑–æ–≤—É—Ç?
ü§ñ –ë–æ—Ç: –í–∞—Å –∑–æ–≤—É—Ç –ò–≤–∞–Ω, –∫–∞–∫ –≤—ã –ø—Ä–µ–¥—Å—Ç–∞–≤–∏–ª–∏—Å—å –≤ –Ω–∞—á–∞–ª–µ –±–µ—Å–µ–¥—ã.
```


***

## üìä –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `asyncio.run_in_executor` –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ `gigachat` –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ç–æ–∫–µ, —á—Ç–æ –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç event loop aiogram.

### –ö–Ω–æ–ø–∫–∞ "–ù–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å"

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–µ–≤–∏–¥–∏–º—ã–π Unicode —Å–∏–º–≤–æ–ª **Hangul Filler** (`\u3164`) –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —Å–ª—É—á–∞–π–Ω–æ–≥–æ –≤–≤–æ–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º:

```python
NEW_QUERY_BUTTON_TEXT = f"–ù–æ–≤—ã–π{'\u3164'}–∑–∞–ø—Ä–æ—Å"
```


### Repository Pattern

–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ –∏ –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º –¥–ª—è —á–∏—Å—Ç–æ—Ç—ã –∫–æ–¥–∞ –∏ —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç–∏.

***

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ –¢–æ–∫–µ–Ω—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `.env` (–Ω–µ –≤ git!)
- ‚úÖ –ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç –Ω–µ–ø—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ Docker
- ‚úÖ PostgreSQL –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ Docker —Å–µ—Ç–∏
- ‚úÖ –õ–æ–≥–∏ –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

***

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License

***

**–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ –¥–ª—è:** za | bota
**–î–∞—Ç–∞:** –ù–æ—è–±—Ä—å 2025
